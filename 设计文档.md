# KY-THREAD
## SHELL
### SHELL简介
​		为了提高系统的交互性以及调试中的方便性，在V1.1版本中引入了shell命令行，将开发板与PC机相连起来通信，目前只支持串口通信，目前的shell暂时不支持自定义命令，只能使用系统自带的命令行。

### 快速上手
​		测试环境：USB-TTL模块，STM32F103C8T6开发板，mobaxterm终端管理软件。

​		在使用之前需要一个USB-TTL模块，将开发板的PA9与模块的RX相连、将开发板的PA10与模块的TX相连、然后将开发板的GND与模块的GND相连。在准备好之后，打开mobaxterm，在Session中选择Serial,在Serial中选择USB-TLL对应的串口，波特率选择9600(官方使用的波特率为9600，可以根据需求自行更改)。然后复位STM32，如果在终端上打印出版本信息，就可以使用了

### SHELL的实现
​		在ky-thread中，为shell开辟了一个独立的线程，与其他线程一起运行，在当前版本还未实现信号量等线程间同步的机制，所以我们的shell读取串口数据只能是阻塞式等待，这导致了在运行效率上的低下。在后面的版本引入信号量机制之后，我们就会使用信号量在中断中通知shell线程读取数据。

### 更改配置
​		想要更改shell的相关配置，同样实在kyconfig里进行更改，如果想使能shell，将KY_USING_SHELL置1即可，如果想失能shell，将KY_USING_SHELL置0即可。其他的shell相关配置也可以根据需求进行更改，如shell线程的优先级、shell线程的栈大小等。

## 线程间同步

​		线程间同步目前支持信号量和互斥量两种方式，具体接口函数请见ipc.c中的函数定义。